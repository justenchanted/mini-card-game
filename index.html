<!DOCTYPE html>
<html>
<head>
    <title>Mini Card Game</title>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600" style="border:1px solid black;"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let cards = [
    'https://github.com/justenchanted/mini-card-game/blob/main/Unbenanntes_Projekt%202.png?raw=true',
    'https://github.com/justenchanted/mini-card-game/blob/main/Unbenanntes_Projekt.png?raw=true'
];

let currentCard = 0;
let flipProgress = 1;  // 1 = full width, 0 = invisible
let flipping = false;
let nextCard = 0;

const img = new Image();
img.src = cards[currentCard];
img.onload = drawCard;

// drawCard function with scaling
function drawCard() {
    ctx.clearRect(0, 0, canvas.width, canvas.height); // clear everything

    ctx.save();
    ctx.translate(400, 275); // move origin to center of card
    ctx.scale(flipProgress, 1); // scale width
    ctx.drawImage(img, -100, -75, 200, 150); // draw centered
    ctx.restore();
}

// click listener to start the flip
canvas.addEventListener('click', () => {
    if (!flipping) {
        flipping = true;
        nextCard = (currentCard + 1) % cards.length;
        requestAnimationFrame(animateFlip);
    }
});

// animation to shrink card width
function animateFlip() {
    if (flipProgress > 0) {
        flipProgress -= 0.1; // shrink
        drawCard();
        requestAnimationFrame(animateFlip);
    } else {
        currentCard = nextCard; // swap image
        img.src = cards[currentCard];
        requestAnimationFrame(animateFlipBack);
    }
}

// animation to grow card width
function animateFlipBack() {
    if (flipProgress < 1) {
        flipProgress += 0.1; // grow
        drawCard();
        requestAnimationFrame(animateFlipBack);
    } else {
        flipping = false; // done
    }
}

// Load first card
const img = new Image();
img.src = cards[currentCard];
img.onload = drawCard;

function drawCard() {
    // Clear canvas
    ctx.fillStyle = 'lightblue';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Draw card
    ctx.drawImage(img, 300, 200, 200, 150);
}

// Flip card on click
canvas.addEventListener('click', () => {
    currentCard = (currentCard + 1) % cards.length; // go to next card
    img.src = cards[currentCard]; // load new image
});
</script>
</body>
</html>
